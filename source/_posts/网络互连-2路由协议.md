---
title: 网络互连-2路由协议
tags:
  - 未分类
id: '258'
date: 2012-12-10 16:10:00
---

路由器  

> 构成：控制部分+交换结构  

> 功能：路由选择+数据交换  
>   
>   

RIP：  

> RIP协议是应用层协议。最大长度：504B  
> 使用UDP协议传送，端口号：520。再封装到IP数据报中传输  

>   
> RIP格式：  
> IP报头|UDP报头|RIP报文  
> 
> > > >      |  
> > 
> > RIP首部：4B  
> > 
> > > 命令：1：请求路由信息；2：对请求的响应和路由更新报文。  
> > > 版本  
> > > 必为0：填充到4B。  
> > 
> > 路由部分：每个路由信息20B，每个RIP最多25个信息。所以RIP报文最大504B  

> > > 地址族标识符：标记用哪个地址协议。如IP协议就标记为2  
> > > 路由标记：自治系统的号码  
> > > 网络地址  
> > > 子网掩码  
> > > 下一条路由器地址  
> > > 距离  
> > >   

  
OSPF：  

> OSPF是网络层协议。  

>   
> OSPF格式：  
> IP报头|OSPF报文  
> 
> > > |  
> 
> > OSPF首部：24B  
> > 
> > > 版本  
> > > 类型：5种类型  
> > > 
> > > > hello分组：发现和保活邻站，10s发送一次。  
> > > > \------------------以下为路由更新用  
> > > > 数据库描述：发送摘要信息  
> > > > 链路状态请求：请求详细路由信息  
> > > > 链路状态更新：发送详细路由信息  
> > > > 链路状态确认：确认收到详细路由信息  
> > > 
> > > 分组长度：整个OSPF报文长度  
> > > 路由器标识符：发送该分组的IP地址  
> > > 区域标识符  
> > > 检验和  
> > > 鉴别类型：不用口令或者用口令  
> > > 鉴别：0或者8个字符的口令  
> > 
> > OSPF数据：分组类型的具体内容  

  
  
BGP：  

> BGP式应用层协议。  
> 使用TCP传送，端口号：179  
> 采用路径向量路由选择协议，构造出的式树形结构。  
>   
> BGP格式：  
> IP报头|TCP报头|BGP报文  
> 
> > > >      |  
> 
> > BGP首部：  
> 
> > > 标记：16B  
> > > 长度：整个BGP报文长度：19B-4096B  
> > > 类型：4种类型  
> > > 
> > > > 打开报文  
> > > > 更新报文  
> > > > 保活报文  
> > > > 通知报文  
> > 
> > BGP数据：各种类型的具体报文