---
title: 网络互连-1IP协议基础
tags:
  - 基础
categories:
  - Network
  - 基础
id: '257'
abbrlink: 3239604257
date: 2012-12-10 15:10:00
---

关于互联网和因特网  

> 互联网：多个网络相连而成的网络。  
> 因特网：使用TCP/IP协议，将多个网络相连而成的网络  

  
  
网络层的协议有：IP、ARP、RARP、ICMP、IGMP等  
  
  
IP数据报报头格式：  

> 版本  
> 头部长度：4bit。每个单位代表4B，所以头部长度最长：15\*4=60B  
> 服务类型：8bit。  
> 
> > 优先级：3bit，  
> > D        ：要求更低的时延  
> > T        ：要求更高的吞吐量  
> > R        ：要求更高的可靠性  
> > C        ：要求更小的路由代价  
> > 未用  
> 
> 总长度：16bit。表示一个IP数据包最大是64KB  
> 
> > > 由于数据链路层的MTU有限制，所以就有了分片的概念。  
> 
> 标识：发数据包时计数器的当前值。  
> 
> >  同个数据包分片后其标识是一样的。这样就知道他们是同个包分出来的。  
> 
> 标志：分2种，MF=1后面还有分片；MF=0后面没有分片。  
> 片偏移：分片后，每个分片的起始字节/8。  
> 
> >  如第二个分片从1400字节开始，则片偏移=1400/8=175  
> 
> 生存时间  
> 协议：8bit。数据提交给哪个上层协议。  
> 首部检验和  
> 源地址  
> 目标地址  
> 可选  
> 数据  

  
  

> CIDR：网络部分不分类，直接划分掩码。  

  
ARP：  

> 将IP传为MAC地址。  

RARP：  

> 无盘工作站：运行ROM里面有RARP程序--->获取IP地址--->下载所需的操作系统和TCP/IP软件等  

  
  
ICMP报文格式：  

> IP报头|ICMP报文  
> 
> > > |  
> 
> 类型--代码--检验和--相关类型的具体报文内容  

>   
> 类型：2种。差错报文和询问报文  
> 代码：类型的值。  
> 
> > 差错报文有5种  
> > 询问报文有4种  
> 
> 检验和：对整个ICMP报文进行检验  
> 数据：根据不同类型不同的值写入不同的内容。  

  
  
  
IGMP报文格式：  

> IGMP就是组播协议，用于视频会议等。  
>   

> IP报头|IGMP报文  
> 
> > > |  
> 
> 类型--响应时间--检验和--组地址  

>   
> IP报头：里面使用的是D类地址。  
> 类型：3种