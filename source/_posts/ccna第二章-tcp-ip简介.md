---
title: CCNA第二章 TCP/IP简介
tags:
  - 未分类
id: '197'
date: 2012-08-24 14:59:00
---

  
TCP标志位：  

> URG 紧急指针，告诉接收**TCP**模块紧要指针域指着紧要数据  
> ACK 置1时表示确认号（1为合法，为0的时候表示数据段不包含确认信息，确认号被忽略。  
> PSH 置1时请求的数据段在接收方得到后就可直接送到应用程序，而不必等到缓冲区满时才传送。  
> RST 置1时重建连接。如果接收到RST位时候，通常发生了某些错误。  
> SYN 置1时用来发起一个连接。  
> FIN 置1时表示发端完成发送任务。用来释放连接，表明发送方已经没有数据发送了。  

  
TCP建立连接的3次握手，断开连接的4次握手  

> ![CCNA第二章 TCP/IP简介 - leaf - ------勤解万难------](http://img2.ph.126.net/QNcHRiKnmfp0TzEeZ_gRLg==/6630304704628997765.jpg "CCNA第二章 TCP/IP简介 - leaf - ------勤解万难------")           ![CCNA第二章 TCP/IP简介 - leaf - ------勤解万难------](http://img0.ph.126.net/P3y0JdiKWn0cXs6lcryJ_g==/6631427306003121585.jpg "CCNA第二章 TCP/IP简介 - leaf - ------勤解万难------")   

  
TCP，UDP的校验是对整个数据段的校验。  
  
虽然三层以下都是不可靠的，但是由于TCP上层就是数据流了，  
所以TCP层设置了排序，校验，窗口等机制，可保证数据可靠。  
  
  
IP层将世界编织成了统一的网。  
  
  
二层广播，三层广播  
二层广播 FF:FF:FF:FF:FF:FF  
三层广播 255.255.255.255  
  
  
  
DOD模型  

> 过程/应用层：Application  

> > 应用层协议，非软件。  
> > 
> > > snmp是通过轮询来获取设备数据：  
> > > 
> > > > 设备正常：接收基线；  
> > > > 设备故障：接收陷阱(有陷阱，数据别过来)  
> > > 
> > > dhcp：发送2、3层广播  
> 
>   
> 主机到主机层：Host-to-host  
> 
> > **TCP、UDP数据段格式很重要**  
> 
> > 端口号：  
> > 
> > > 用于和上层的通信  
> > > 打开多个网页用到端口号，PAT用的也是端口号  
> > 
> > > 0-1023特殊用，1024-65535 自定义  
> > > TCP：smtp：   25 、http： 80、dns：53  
> > > UDP：snmp：161、dhcp：67、dns：53  
> 
>   
> 因特网层：Internet  
> 
> > **IP报头格式很重要**  
> > 协议号：  
> > 
> > > 用来确认IP数据包中数据的用途，并将数据提交给该协议使用  
> > > 协议可以定义上层协议和本层协议(网络层协议)  
> > 
> > > ICMP ：   1  
> > > TCP：      6  
> > > UDP：    17  
> > > IPv6：    41  
> > > EIGRP：88  
> > > OSPF： 89  
> > > STP：  118  
> 
> > ICMP、ARP、RARP、IP多属于这层  
> > ICMP先封装到IP再封装到帧，ARP直接封装到帧  
> > 
> > > ARP发送2层广播  
> > > ARP：       IP-> MAC  
> > > RARP：     MAC->IP  
> > > 代理ARP：解决网关坏了之后的数据发送问题(相当于备用网关)  
> > 
> >   
> 
> 网络接入层：Network access  
> 
> >   
> 
> >   
> >   

DHCP寻址过程  

> 客户机发送2层、3层广播  
> 由于目的端口：67，路由器将此请求发送到DHCP服务器  
> DHCP服务器发送IP地址给客户机  
> 
> > 注：DHCP使用udp进行连接  

  
  
IP地址  

> A类：0  
> B类：10  
> C类：110  
> D类：1110